<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Temps App</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const { createClient } = supabase;  // from the CDN
    const SUPABASE_URL = 'https://your-project-ref.supabase.co';
    const SUPABASE_ANON_KEY = 'your-anon-key-here';
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 500px; margin: 2rem auto; padding: 1rem; background: #f9f9fb; }
    h1 { text-align: center; color: #2c3e50; }
    form { margin: 1.5rem 0; text-align: center; }
    input { padding: 0.7rem; font-size: 1.6rem; width: 100px; text-align: center; border: 2px solid #3498db; border-radius: 8px; }
    button { padding: 0.7rem 1.2rem; font-size: 1rem; background: #3498db; color: white; border: none; border-radius: 8px; cursor: pointer; margin-left: 0.5rem; }
    button:disabled { background: #95a5a6; cursor: not-allowed; }
    .locked { opacity: 0.5; pointer-events: none; }
    #status { text-align: center; margin: 1rem 0; font-weight: bold; }
    .reveal { background: #e8f4fc; padding: 1.2rem; border: 1px solid #3498db; border-radius: 10px; margin-top: 1.5rem; text-align: center; }
    .diff { font-size: 1.4rem; margin-top: 0.5rem; }
  </style>
</head>
<body>

  <h1>KNYC Daily High Forecast</h1>
  <p style="text-align:center;">Forecast today's high in NYC.</p>

  <!-- REQUIRED: These IDs must exist -->
  <form id="tempsForm">
    <label>
      Your Guess (Â°F):
      <input type="number" id="knyc_high" name="knyc_high" min="-25" max="125" step="1" required placeholder="53">
    </label>
    <button type="submit" id="submitBtn">Confirm</button>
  </form>

  <div id="status"></div>
  <div id="reveal" style="display:none;" class="reveal"></div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
async function saveForecast(userId, date, guess) {
  const { data, error } = await supabase
    .from('forecasts')
    .insert([{ user_id: userId, date: date, guess: guess }]);

  if (error) console.error('Save error:', error);
  else console.log('Saved:', data);
}

// Read forecasts (e.g., leaderboard)
async function getLeaderboards() {
  const { data, error } = await supabase
    .from('forecasts')
    .select('user_id, guess, coins')
    .order('coins', { ascending: false })
    .limit(10);

  if (error) console.error('Read error:', error);
  else console.log('Top 10:', data);
}

// Example usage in your form submit
document.getElementById('submitBtn').addEventListener('click', async () => {
  const guess = document.getElementById('knyc_high').value;
  const userId = 'temp-user-123';  // Replace with real auth later
  await saveForecast(userId, new Date().toISOString().split('T')[0], parseInt(guess));
});
  </script>
  
</body>
</html>
